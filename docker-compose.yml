# =========================================================
# Sora Automation â€” Docker Compose
# =========================================================
# Uses the EXACT same image as setup_chromium.sh (proven working)
# Our API files are mounted via volumes and auto-started via init script
# =========================================================

version: "3.9"

services:
  chromium:
    image: lscr.io/linuxserver/chromium:8d3cb5f1-ls129
    container_name: sora-automation
    security_opt:
      - seccomp:unconfined
    environment:
      - CUSTOM_USER=${CHROME_USER:-admin}
      - PASSWORD=${CHROME_PASSWORD:-changeme}
      - PUID=1000
      - PGID=1000
      - TZ=Asia/Kolkata
      - CHROME_CLI=--remote-debugging-port=9222 --remote-debugging-address=0.0.0.0
    volumes:
      - ./data:/config
      - ./videos:/app/videos
      - ./app:/app
      - ./requirements.txt:/app/requirements.txt
      - ./startup.sh:/custom-cont-init.d/99-start-api.sh
    ports:
      - 4100:3000
      - 4101:3001
      - 8000:8000
    shm_size: "1gb"
    restart: unless-stopped
